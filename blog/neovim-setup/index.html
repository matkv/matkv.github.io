<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css type=text/css media=all><link disabled id=dark-mode-theme rel=stylesheet href=/css/darkmode.css><script src=https://kit.fontawesome.com/aa8e5d8b31.js crossorigin=anonymous></script><title>matko</title></head><body><div class=navigation><div class=website-title><a href=/>Matko</a></div><ul><li><a href=/>home</a></li><li><a href=/about>about</a></li><li><a href=/blog class=navigation-active>blog</a></li><li><a href=/projects>projects</a></li><li><a><i id=dark-mode-toggle class="far fa-moon"></i></a></li><script>var toggle=document.getElementById("dark-mode-toggle"),savedTheme,darkTheme=document.getElementById("dark-mode-theme");toggle.addEventListener("click",()=>{toggle.className==="fas fa-moon"?setTheme("dark"):toggle.className==="fas fa-sun"&&setTheme("light")}),savedTheme=localStorage.getItem("dark-mode-storage")||"light",setTheme(savedTheme);function setTheme(e){localStorage.setItem("dark-mode-storage",e),e==="dark"?(darkTheme.disabled=!1,toggle.className="fas fa-sun"):e==="light"&&(darkTheme.disabled=!0,toggle.className="fas fa-moon")}</script></ul></div><div class=content><div class=pagetitle>Neovim setup</div><div class=blogdate>29 October 2021</div><p>I decided to try out <strong>Neovim</strong> so I will use this blog post to document the setup process.</p><p>My main goals are:</p><ul><li>Automate the setup process as much as possible so that I can easily reuse my configuration on a different computer.</li><li>Setup an built-in file browser and a nice theme (maybe the palenight theme)</li><li>Setup code completion for my most used languages, maybe try C# first</li></ul><p><strong>TO-DO</strong></p><ul><li>Install some plugin to show a file tree on the left side</li></ul><h2 id=introduction>Introduction</h2><p>After installing Neovim (on Manjaro Linux: <code>sudo pacman -S neovim</code>) I can start it with the command <code>nvim</code>.</p><p>I created an <code>init.lua</code> file in my dotfiles repository and symlinked it to the location of the actual Neovim config file:</p><pre tabindex=0><code>ln -s ~/dotfiles/nvim/init.lua ~/.config/nvim/init.lua
</code></pre><p>This way I should be able to change my config and still be able to have some version control because it is in my dotfiles repository.</p><h2 id=initlua>init.lua</h2><p>We can configure Neovim using the <code>init.lua</code> file. For example, we can enable line numbers by adding this line to the config file:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.wo.number <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>true</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=option-levels>Option levels</h3><p>There are several option levels:</p><ul><li><code>vim.o.{option}</code>: global options</li><li><code>vim.bo.{option}</code>: buffer-local options</li><li><code>vim.wo.{option}</code>: window-local options</li></ul><p>Each option is specific to a level; for example - the <code>number</code> option is only available in the <code>window-local</code> options.</p><h2 id=basic-usage>Basic usage</h2><p>I can open a file by just typing <code>nvim filename</code> in the console. To move around in the file I can use the h,j,k,l keys or just the arrow keys. <code>:q</code> (shift+colon and then q) to close a file <code>:w</code> to save it.</p><p>It is also possible to open a folder with nvim. Then the files and folders inside it will be shown as a list and I can enter the folders or files with the enter key.</p><p>With <code>shift + w</code> I can jump to the next word, with a upper case <code>W</code> I can jump to the next word delimited by spaces. By using the same combination with <code>e</code> instead, we can jump to the end of each word. And <code>shift + b</code> jumps back one word instead of forward.</p><h3 id=editing-text>Editing text</h3><p>By hitting the <code>i</code> key, we enter insert mode. Now we can actually add and change text. With the command <code>:u</code> we can undo the last change we made.</p><h3 id=splitting-the-window>Splitting the window</h3><p>I can split the current window verticall by using the <code>:vs</code> command. This opens another vertical window to the right. The <code>:split</code> command would open one below. In order to move around between all open windows we can use the <code>:W w</code> command (colon W and then w). This cycles through all currently open windows. To close the currently open window I can use the normal <code>:q</code> command.</p><p>If I have the <strong>mouse enabled in the settings (init.lua)</strong>, I can also just click a specific window to focus it and <strong>resize the windows by dragging with the mouse</strong>.</p><h2 id=using-a-plugin-manager---packer>Using a plugin manager - packer</h2><p>I created a new folder in my nvim folder called &ldquo;lua&rdquo; and a &ldquo;plugins&rdquo; folder in the new lua folder and a new file called <code>init.lua</code>. (I actually created it in my dotfiles repo and symlinked it to the actual config folder again).</p><p>So after creating the folder and file in the actual config folder I ran the command:</p><pre tabindex=0><code>ln -s -f ~/dotfiles/nvim/lua/plugins/init.lua ~/.config/nvim/lua/plugins/init.lua
</code></pre><p>Now the file in my dotfiles repository is symlinked to the actual config file again.</p><p>Then I cloned the repository of the packer plugin manager:</p><pre tabindex=0><code>git clone --depth 1 https://github.com/wbthomason/packer.nvim\
 ~/.local/share/nvim/site/pack/packer/start/packer.nvim
</code></pre><p>Now we add the first plugin to the <code>init.lua</code> file in the plugins directory:</p><pre tabindex=0><code>return require(&#39;packer&#39;).startup(function()
    -- Packer can manage itself
    use &#39;wbthomason/packer.nvim&#39;
end)
</code></pre><p>I think this actually means that the plugin manager is basically adding itself as a plugin too. Now we have to reference this plugins folder in the actual <code>init.lua</code> file in the &ldquo;root&rdquo; directory (~/.config/nvim/init.lua)</p><p>In the initi.lua file:</p><pre tabindex=0><code>require(&#39;plugins&#39;)
</code></pre><p>Now we open the <code>init.lua</code> file (in the actual config folder) in nvim and run the command (shift + colon) <code>PackerInstall</code>.</p><h3 id=installing-a-color-scheme>Installing a color scheme</h3><p>In the plugins folder we add a reference to the github repository that holds the color scheme. In my case I will be using the &ldquo;Nord&rdquo; color scheme:</p><pre tabindex=0><code>return require(&#39;packer&#39;).startup(function()
    -- Packer can manage itself
    use &#39;wbthomason/packer.nvim&#39;
    
    -- Nord color scheme
    use &#39;shaunsingh/nord.nvim&#39;
end)
</code></pre><p>And then we run <code>PackerInstall</code> again. Then in the normal init.lua file we need to set the color scheme:</p><pre tabindex=0><code>vim.cmd(&#39;colorscheme nord&#39;)
</code></pre><p>After saving the file and opening nvim again, we should now <strong>see the new color scheme</strong> :)</p><h3 id=adding-better-syntax-highlighting-using-treesitter>Adding better syntax highlighting using treesitter</h3><p>In the <code>init.vim</code> file in the plugins folder we add</p><pre tabindex=0><code>    use {
        &#39;nvim-treesitter/nvim-treesitter&#39;,
        run = &#39;:TSUpdate&#39;
    }
</code></pre><p>And then we install the treesitter plugin using the <code>PackerSync</code> command.</p><h3 id=adding-treesitter-support-for-all-maintained-languages>Adding treesitter support for all maintained languages</h3><p>We add a reference to the treesitter config in the normal <code>lua.init</code>:</p><pre tabindex=0><code>require(&#39;treesitter-config&#39;)
</code></pre><p>This basically means that the <code>init.lua</code> file will require any plugins/settings that are in <code>init.lua</code> files in the directories that are specified this way.</p><p>Then we create this <code>treesitter-config</code> folder in the <code>lua</code> folder. And in this new folder we create a new <code>init.lua</code> file. Now we can basically enable all languages that are &ldquo;maintained&rdquo; and supported by treesitter:</p><pre tabindex=0><code>require&#39;nvim-treesitter.configs&#39;.setup {
  ensure_installed = &#34;maintained&#34;,
  highlight = {
    enable = true,              -- false will disable the whole extension
    additional_vim_regex_highlighting = false,
  },
}
</code></pre><p>The next time we open nvim, it will automatically download and install all languages that are supported. Now the syntax highlighting should look a lot better when opening code.</p><h2 id=figuring-out-which-option-level-a-setting-belongs-to>Figuring out which option level a setting belongs to</h2><p>In order to set settings in the <code>init.lua</code> file using lua syntax, we need to specify the option level, for example <code>vim.wo.number'. In order to figure out which option level a specific setting belongs to, we can use the </code>help command`.</p><p>For exmample, figuring out where the <code>cursorline</code> setting belongs to:</p><pre tabindex=0><code>:help cursorline
</code></pre><p>Now the settings page shows that <code>cursorline</code> is of type boolean and that it is <strong>local to window</strong>. This means we can set it using <code>vim.wo.cursorline = true</code>.</p><br><div class=blogbacktolist><a href=/blog>Back to overview</a></div></div><div class=footer><p>© 2022 | Matko Bušljeta</p></div></body></html>