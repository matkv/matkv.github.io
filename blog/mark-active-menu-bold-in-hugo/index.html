<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css type=text/css media=all><link disabled id=dark-mode-theme rel=stylesheet href=/css/darkmode.css><link id=syntax-light rel=stylesheet href=/css/syntaxlight.css><link disabled id=syntax-dark rel=stylesheet href=/css/syntaxdark.css><script src=https://kit.fontawesome.com/aa8e5d8b31.js crossorigin=anonymous></script><title></title></head><body><div class=navigation-background><div class=navigation><div class=website-title><a href=/>matkv</a></div><ul><li><a href=/>home</a></li><li><a href=/about>about</a></li><li><a href=/blog class=navigation-active>blog</a></li><li><a href=/notes>notes</a></li><li><a href=/projects>projects</a></li><li><a><i id=dark-mode-toggle class="far fa-moon"></i></a></li><script>var toggle=document.getElementById("dark-mode-toggle"),savedTheme,savedSyntax,darkTheme=document.getElementById("dark-mode-theme"),syntaxlight=document.getElementById("syntax-light"),syntaxdark=document.getElementById("syntax-dark");toggle.addEventListener("click",()=>{toggle.className==="fas fa-moon"?(setTheme("dark"),setSyntax("dark-syntax")):toggle.className==="fas fa-sun"&&(setTheme("light"),setSyntax("light-syntax"))}),savedTheme=localStorage.getItem("dark-mode-storage")||"light",savedSyntax=localStorage.getItem("syntax-storage")||"light-syntax",setTheme(savedTheme),setSyntax(savedSyntax);function setTheme(e){localStorage.setItem("dark-mode-storage",e),e==="dark"?(darkTheme.disabled=!1,toggle.className="fas fa-sun"):e==="light"&&(darkTheme.disabled=!0,toggle.className="fas fa-moon")}function setSyntax(e){localStorage.setItem("syntax-storage",e),e==="dark-syntax"?(syntaxdark.disabled=!1,syntaxlight.disabled=!0):e==="light-syntax"&&(syntaxdark.disabled=!0,syntaxlight.disabled=!1)}</script></ul></div></div><div class=content><div class=pagetitle>Mark active menu bold in Hugo</div><div class=blogdate>24 March 2022</div><p>A quick summary of how I managed to set the currently active menu item bold on this website. My solution is a bit hacky but it works.</p><p>This is how the menu currently looks in my <code>config.toml</code> file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>menu</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>[[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>    <span class=nx>identifier</span> <span class=p>=</span> <span class=s2>&#34;home&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;home&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>[[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>    <span class=nx>identifier</span> <span class=p>=</span> <span class=s2>&#34;about&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;about&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;/about&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>20</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>[[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>    <span class=nx>identifier</span> <span class=p>=</span> <span class=s2>&#34;blog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;blog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;/blog&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>30</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>[[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>    <span class=nx>identifier</span> <span class=p>=</span> <span class=s2>&#34;projects&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;projects&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;/projects&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>40</span>
</span></span></code></pre></div><p>In my <code>navigation.html</code> I already had my range function that goes through all those elements in the menu and creates a list item & link for them.</p><p>What&rsquo;s new now is that I added a check to see if the <code>URL</code> property of the current menu item is the same as <code>RelPermalink</code> property of the current page. I&rsquo;ve found several other ways to do this online but haven&rsquo;t managed to get them to work.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-golang data-lang=golang><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>current</span> <span class=o>:=</span> <span class=p>.</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=k>range</span> <span class=p>.</span><span class=nx>Site</span><span class=p>.</span><span class=nx>Menus</span><span class=p>.</span><span class=nx>main</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>active</span> <span class=o>:=</span> <span class=kc>false</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>trimmedperma</span> <span class=o>:=</span> <span class=nx>trim</span> <span class=err>$</span><span class=nx>current</span><span class=p>.</span><span class=nx>RelPermalink</span> <span class=s>&#34;/&#34;</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>trimmedurl</span> <span class=o>:=</span> <span class=nx>trim</span> <span class=p>.</span><span class=nx>URL</span> <span class=s>&#34;/&#34;</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>active</span> <span class=o>:=</span> <span class=nx>or</span> <span class=err>$</span><span class=nf>active</span> <span class=p>(</span><span class=nx>eq</span> <span class=err>$</span><span class=nx>trimmedperma</span> <span class=err>$</span><span class=nx>trimmedurl</span><span class=p>)}}</span>        
</span></span></code></pre></div><p>So if the current menu is for example the blog page, the <code>URL</code> of the menu item will be &ldquo;/blog&rdquo; and the permalink of the page will have the same value. (I had to trim the slashes to make the comparison cleaner). If that is true, the <code>$active</code> variable will be set to true.</p><p>For the actual menu item, I added an if clause that checks if the ``$active``` variable is set and then adds a css class to the link tag of the item. The css class just has a rule to set the font to bold.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class=&#34;{{ if $active }}navigation-active{{ end }}&#34;
</span></span></code></pre></div><p>This alone would however not work if I would for example open up a specific blog post or a project from my projects list. For this I also needed to check if the section of the current page is the correct one - a blog or a project.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>active</span> <span class=o>:=</span> <span class=nx>or</span> <span class=err>$</span><span class=nf>active</span> <span class=p>(</span><span class=nf>and</span> <span class=p>(</span><span class=nx>eq</span> <span class=err>$</span><span class=nx>trimmedurl</span> <span class=s>&#34;blog&#34;</span><span class=p>)</span> <span class=p>(</span><span class=nx>eq</span> <span class=err>$</span><span class=nx>current</span><span class=p>.</span><span class=nx>Section</span> <span class=s>&#34;blog&#34;</span><span class=p>))</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>active</span> <span class=o>:=</span> <span class=nx>or</span> <span class=err>$</span><span class=nf>active</span> <span class=p>(</span><span class=nf>and</span> <span class=p>(</span><span class=nx>eq</span> <span class=err>$</span><span class=nx>trimmedurl</span> <span class=s>&#34;projects&#34;</span><span class=p>)</span> <span class=p>(</span><span class=nx>eq</span> <span class=err>$</span><span class=nx>current</span><span class=p>.</span><span class=nx>Section</span> <span class=s>&#34;projects&#34;</span><span class=p>))</span> <span class=p>}}</span>
</span></span></code></pre></div><p>Now, the menu items stays bold even when I open up a specific blog post or project post. I&rsquo;ll have to update this spot whenever I add a new archetype that has lists/subpages that can be opened.</p><p>While writing this blogpost I also finally managed to set up a <strong>basic version of the syntax highlighting</strong> using chroma and Pygments & managed to make it work so that it uses a different color scheme when I switch between dark and light mode. I used <a href=https://hedy.tilde.cafe/posts/hugo-syntax-highlighting/>this tutorial</a> as a general guide but my implementation is basically done the same way as the dark mode / light mode switch works.</p><p>If I ever want to change a color scheme, I can just generate it using this command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>hugo gen chromastyles --style<span class=o>=</span>friendly &gt; path/to/cssfile/filename.css
</span></span></code></pre></div><p>Then I can basically just switch out the content of my current <code>static/css/syntaxlight.css</code> and <code>static/css/syntaxdark.css</code> files and easily use a different color scheme.</p><p>But I&rsquo;m definitely not motivated enough to write all of that down in this post :D</p><br><div class=blogbacktolist><a href=/blog>Back to overview</a></div></div><div class=footer><p>© 2022 | matkv</p></div></body></html>